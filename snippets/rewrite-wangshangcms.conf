# 字体文件跨域访问支持
location ~* \.(eot|ttf|woff|svg|otf|woff2)$ {
    add_header Access-Control-Allow-Origin *;
}

# 移动端目录伪静态规则
location /mobile/ {
    # 如果请求的文件存在，直接返回
    if (-f $request_filename) {
        break;
    }
    # 如果请求的是静态文件，直接返回
    if ($request_filename ~* "\.(js|ico|gif|jpe?g|bmp|png|css)$") {
        break;
    }
    # 如果文件不存在，重写到移动端入口文件
    if (!-e $request_filename) {
        rewrite . /mobile/index.php last;
    }
}

# 主目录伪静态规则
location / {
    # 如果请求的文件存在，直接返回
    if (-f $request_filename) {
        break;
    }
    # 如果请求的是静态文件，直接返回
    if ($request_filename ~* "\.(js|ico|gif|jpe?g|bmp|png|css)$") {
        break;
    }
    # 如果文件不存在，重写到主入口文件
    if (!-e $request_filename) {
        rewrite . /index.php last;
    }
}